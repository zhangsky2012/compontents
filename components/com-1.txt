这是一个更新后的公共代码